# Git Tips

This note contains operation related tips. See [[cross-platform/git]] for configuration tips.

- [Git Tips](#git-tips)
  - [Commit message convention](#commit-message-convention)
  - [Change commit messages](#change-commit-messages)
  - [Clone to a specific directory](#clone-to-a-specific-directory)
  - [Update an unchecked-out local branch from remote branch](#update-an-unchecked-out-local-branch-from-remote-branch)
  - [Discard unstaged changes](#discard-unstaged-changes)
  - [Stash changes](#stash-changes)
  - [Rename branch](#rename-branch)
  - [Change repo remote origin](#change-repo-remote-origin)
  - [Hard reset remote branch](#hard-reset-remote-branch)
  - [墙国专属](#墙国专属)
    - [Change `hosts`](#change-hosts)
    - [Set proxy](#set-proxy)
      - [Linux](#linux)
    - [Other methods](#other-methods)

## Commit message convention

*References*:

- https://www.conventionalcommits.org/en/v1.0.0/

## Change commit messages

- Change the last one: `git commit --amend`
- [ ] Change multiple

*References*:

- [Changing a commit message](https://docs.github.com/en/pull-requests/committing-changes-to-your-project/creating-and-editing-commits/changing-a-commit-message)

## Clone to a specific directory

Use `git clone git@github.com:SOME_REPO TARGET_DIRECTORY`.

*References*:

- [How to 'git pull' into a branch that is not the current one?](https://stackoverflow.com/questions/651038/how-do-i-clone-a-git-repository-into-a-specific-folder)

## Update an unchecked-out local branch from remote branch

Use `git fetch REMOTE_REPO REMOTE_BRANCH:LOCAL_BRANCH`.

## Discard unstaged changes

- Discard all: `git restore .`
- Discard a specific file: `git restore PATH_TO_THE_FILE`

*References*:

- [How To Completely Reset a Git Repository (Including Untracked Files)](https://www.howtogeek.com/devops/how-to-completely-reset-a-git-repository-including-untracked-files/)

## Stash changes

- Stash changes by `git stash`.
- Pop stash by `git stash pop`.

*References*:

- [Git stash](https://www.atlassian.com/git/tutorials/saving-changes/git-stash)

## Rename branch

- Rename checked-out local branch: Use `git branch --move NEW_BRANCH_NAME`.
- Rename unchecked-out local branch: Use `git branch --move BRANCH_NAME NEW_BRANCH_NAME`.

## Change repo remote origin

Use `git remote set-url REMOTE_NAME NEW_URL`.

*References*:

- [How To Change Git Remote Origin](https://devconnected.com/how-to-change-git-remote-origin/)

## Hard reset remote branch

After hard resetting the local repo, use `git push -f REMOTE_REPO BRANCH_NAME` to hard reset the remote repo.

## 墙国专属

### Change `hosts`

Get `hosts` from the following sites:

- https://github.com/521xueweihan/GitHub520
- https://github.com/ineo6/hosts
  - https://ineo6.github.io/hosts/
- https://github.com/isevenluo/github-hosts

### Set proxy

#### Linux

*References*:

- [Configure Git to use a proxy](https://gist.github.com/evantoli/f8c23a37eb3558ab8765)
- [Configure Git to use a proxy (https or SSH+GIT)](https://gist.github.com/ozbillwang/005bd1dfc597a2f3a00148834ad3e551)

### Other methods

*References*:

- https://github.com/dotnetcore/FastGithub

[//begin]: # "Autogenerated link references for markdown compatibility"
[cross-platform/git]: ../notes_OS/cross-platform/git.md "Git Configuration"
[//end]: # "Autogenerated link references"
